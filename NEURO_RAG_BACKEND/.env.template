# NEURO RAG Backend Environment Configuration Template
# Copy this file to .env and fill in your values

# ====================
# Azure OpenAI Configuration
# ====================
AZURE_OPENAI_STANDARD_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_STANDARD_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-01

# Deployment names for models
AZURE_OPENAI_GPT4O_DEPLOYMENT=gpt-4o
AZURE_OPENAI_GPT4O_MINI_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# ====================
# Azure Cognitive Search Configuration
# ====================
AZURE_SEARCH_SERVICE_ENDPOINT=https://your-search-service.search.windows.net
AZURE_SEARCH_ADMIN_KEY=your_search_admin_key_here
AZURE_SEARCH_API_VERSION=2024-11-01-preview

# Index Configuration
# For non-chunked index (legacy): neuro-rag
# For semantic chunks index (recommended): neuro-rag-semantic-chunks
AZURE_SEARCH_INDEX=neuro-rag-semantic-chunks

# Semantic Configuration (use 'default' for Agentic Retrieval)
SEMANTIC_CONFIG_NAME=default

# ====================
# Document Intelligence Configuration
# ====================
# Required for Document Layout Skill in Azure AI Foundry
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-doc-intelligence.cognitiveservices.azure.com/
AZURE_DOCUMENT_INTELLIGENCE_KEY=your_document_intelligence_key_here

# ====================
# Azure Storage Configuration
# ====================
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=youraccount;AccountKey=yourkey;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER_NAME=neuro-documents

# ====================
# Database Configuration (if applicable)
# ====================
TD_HOST=your_teradata_host
TD_USER=your_teradata_user
TERADATA_PASS=your_teradata_password
LOGMECH=TD2

# Cloudera Configuration
CLOUDERA_HOST=your_cloudera_host
CLOUDERA_USER=your_cloudera_user
CLOUDERA_PASS=your_cloudera_password
CLOUDERA_PORT=10000
CLOUDERA_AUTH=PLAIN

# ====================
# RAG Agent Configuration
# ====================
# Retrieval mode: agentic (best accuracy) or standard
RAG_RETRIEVAL_MODE=agentic

# Search mode: semantic, vector, hybrid, keyword
RAG_SEARCH_MODE=hybrid

# Maximum number of search results to retrieve
RAG_MAX_SEARCH_RESULTS=10

# Semantic relevance threshold (0.0-1.0)
RAG_SEMANTIC_THRESHOLD=0.7

# Enable query result caching
RAG_ENABLE_CACHE=true

# Cache time-to-live in seconds
RAG_CACHE_TTL_SECONDS=300

# Maximum cache size (number of entries)
RAG_MAX_CACHE_SIZE=100

# ====================
# Agentic Retrieval Configuration
# ====================
# Maximum subqueries for query planning
RAG_MAX_SUBQUERIES=5

# Maximum documents per subquery
RAG_MAX_DOCS_PER_SUBQUERY=50

# Enable query planning
RAG_ENABLE_QUERY_PLANNING=true

# Enable parallel execution
RAG_ENABLE_PARALLEL_EXECUTION=true

# LLM model for query planning (use faster model)
RAG_LLM_MODEL=gpt-4o-mini

# Chunk Configuration (for Document Layout Skill)
# Chunk size in tokens (recommended: 800-1000 for oil well documents)
RAG_CHUNK_SIZE=1000

# Chunk overlap in tokens (recommended: 100-200)
RAG_CHUNK_OVERLAP=200

# Maximum tokens for RAG context
RAG_MAX_TOKENS=10000

# Include parent context in search results (for chunk relationships)
RAG_INCLUDE_PARENT_CONTEXT=true

# Maximum header depth for Document Layout Skill (h1, h2, h3)
DOCUMENT_LAYOUT_HEADER_DEPTH=h3

# Minimum confidence score for semantic answers
RAG_MIN_SEMANTIC_SCORE=0.8

# Timeout for RAG operations in seconds
RAG_TIMEOUT_SECONDS=30

# ====================
# Application Configuration
# ====================
# Enable unified agent architecture (replaces 3-layer)
USE_UNIFIED_AGENT=true

# ====================
# Unified Agent Configuration
# ====================
# Model for unified agent (use faster model for reduced latency)
UNIFIED_AGENT_MODEL=gpt-4o-mini

# Temperature for agent responses
UNIFIED_AGENT_TEMPERATURE=0.7

# Maximum tokens for agent responses
UNIFIED_AGENT_MAX_TOKENS=2000

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGLEVEL=INFO
LOGLEVEL_UTIL=INFO

# Request timeout in seconds
REQUEST_TIMEOUT=120

# Maximum concurrent requests
MAX_CONCURRENT_REQUESTS=10

# ====================
# Model Configuration
# ====================
# Temperature for LLM responses (0.0-2.0)
LLM_TEMPERATURE=0.7

# Maximum tokens for LLM response
LLM_MAX_TOKENS=2000

# Model selection
LLM_MODEL=gpt-4o-mini

# ====================
# Memory Configuration
# ====================
# Memory backend: sqlite, postgresql, cosmosdb
MEMORY_BACKEND=sqlite

# SQLite configuration
SQLITE_DB_PATH=data/memory.db

# PostgreSQL configuration (if using PostgreSQL)
# POSTGRES_CONNECTION_STRING=postgresql://user:password@host:port/database

# CosmosDB configuration (if using CosmosDB)
# COSMOS_ENDPOINT=https://your-cosmos.documents.azure.com:443/
# COSMOS_KEY=your_cosmos_key_here
# COSMOS_DATABASE=neuro-memory
# COSMOS_CONTAINER=conversations

# ====================
# Security Configuration
# ====================
# Enable SSL verification
SSL_VERIFY=true

# API rate limiting (requests per minute)
API_RATE_LIMIT=60

# Allowed origins for CORS
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# ====================
# Monitoring Configuration
# ====================
# Enable telemetry
ENABLE_TELEMETRY=true

# Application Insights connection string (if using)
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your_key_here

# ====================
# Feature Flags
# ====================
# Enable semantic search features
ENABLE_SEMANTIC_SEARCH=true

# Enable vector search features
ENABLE_VECTOR_SEARCH=true

# Enable query rewriting
ENABLE_QUERY_REWRITE=true

# Enable answer extraction
ENABLE_ANSWER_EXTRACTION=true

# ====================
# Performance Tuning
# ====================
# Thread pool size for concurrent operations
THREAD_POOL_SIZE=4

# Connection pool size for database
CONNECTION_POOL_SIZE=10

# Request retry attempts
MAX_RETRY_ATTEMPTS=3

# Retry delay in seconds
RETRY_DELAY_SECONDS=1

# ====================
# Development/Debug Settings
# ====================
# Enable debug mode (DO NOT use in production)
DEBUG=false

# Enable SQL query logging
LOG_SQL_QUERIES=false

# Enable request/response logging
LOG_REQUESTS=false

# ====================
# Deployment Configuration
# ====================
# Environment: development, staging, production
ENVIRONMENT=production

# Application host
APP_HOST=0.0.0.0

# Application port
APP_PORT=8000

# Workers for production deployment
WORKERS=4

# ====================
# Additional Azure Services (Optional)
# ====================
# Azure Key Vault for secrets management
# AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/

# Azure Service Bus for async processing
# AZURE_SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://your-servicebus.servicebus.windows.net/;SharedAccessKeyName=your-key-name;SharedAccessKey=your-key

# ====================
# External Service Integration (Optional)
# ====================
# Webhook URLs for notifications
# WEBHOOK_URL=https://your-webhook-endpoint.com/webhook

# External API endpoints
# EXTERNAL_API_BASE_URL=https://api.external-service.com

# ====================
# Data Processing Configuration
# ====================
# Batch size for bulk operations
BATCH_SIZE=100

# Maximum file upload size in MB
MAX_FILE_SIZE_MB=50

# Supported file formats
SUPPORTED_FILE_FORMATS=pdf,txt,docx,xlsx,csv

# ====================
# Backup and Recovery
# ====================
# Enable automatic backups
ENABLE_BACKUPS=true

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# Backup retention days
BACKUP_RETENTION_DAYS=30