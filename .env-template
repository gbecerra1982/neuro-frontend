# ================================================================
# AZURE SPEECH LIVE VOICE WITH AVATAR - ENVIRONMENT CONFIGURATION
# ================================================================

# ================================
# PRIMARY AZURE OPENAI REALTIME API
# ================================
AZURE_OPENAI_ENDPOINT=https://resourcename.openai.azure.com/
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_DEPLOYMENT=gpt-4o-realtime-preview
AZURE_OPENAI_API_VERSION=2025-04-01-preview
AZURE_OPENAI_MODEL=gpt-4o-realtime-preview

# ================================
# AZURE SPEECH SERVICES
# ================================
SPEECH_SERVICE_NAME=
SPEECH_KEY=
SPEECH_ENDPOINT=https://{region}.api.cognitive.microsoft.com/
SPEECH_REGION={region}
SPEECH_PRIVATE_ENDPOINT=https://resourcename-private.cognitiveservices.azure.com/
SPEECH_COGNITIVE_ENDPOINT=https://resourcename.cognitiveservices.azure.com/

# ================================
# AZURE COGNITIVE SERVICES
# ================================
AZURE_AI_SERVICES_ENDPOINT=https://resourcename.cognitiveservices.azure.com/
AZURE_AI_SERVICES_API_KEY=

# ================================
# AZURE AI FOUNDRY
# ================================
AZURE_AI_FOUNDRY_ENDPOINT=https://resourcename.services.ai.azure.com/api/projects/{project-name}
AZURE_AI_FOUNDRY_API_KEY=

# ================================
# AZURE OPENAI STANDARD (For minipywo/text processing)
# ================================
AZURE_OPENAI_STANDARD_ENDPOINT=https://resourcename.openai.azure.com/
AZURE_OPENAI_STANDARD_API_KEY=
AZURE_OPENAI_DEPLOYMENT_NAME=chat4og
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-3-large
AZURE_OPENAI_EMBEDDING_DEPLOYMENT_NAME=embeddingada003l
API_VERSION=2024-10-21
OPENAI_API_KEY=

# ================================
# AZURE COGNITIVE SEARCH
# ================================
COGNITIVE_SEARCH_ENDPOINT=https://resourcename.search.windows.net
COGNITIVE_SEARCH_API_KEY=
COGNITIVE_SEARCH_INDEX_NAME=pywo-idx
AZURE_SEARCH_ADMIN_KEY=
AZURE_SEARCH_SERVICE_ENDPOINT=https://resourcename.search.windows.net
AZURE_SEARCH_USE_SEMANTIC=true
AZURE_SEARCH_APPROACH=hybrid

# ================================
# AVATAR CONFIGURATION
# ================================
ENABLE_AVATAR=true
AVATAR_CHARACTER=lisa
AVATAR_STYLE=casual-sitting
AVATAR_RESOLUTION_WIDTH=1920
AVATAR_RESOLUTION_HEIGHT=1080
AVATAR_VIDEO_BITRATE=2000000
AVATAR_VIDEO_FRAMERATE=25
AVATAR_VIDEO_CODEC=H264
AVATAR_VIDEO_QUALITY=high
AVATAR_BACKGROUND_COLOR=#FFFFFFFF
AVATAR_BACKGROUND_IMAGE=
AVATAR_KEYFRAME_INTERVAL=2000
AVATAR_HARDWARE_ACCELERATION=true

# ================================
# VOICE CONFIGURATION
# ================================
VOICE_NAME=es-AR-TomasNeural
VOICE_MODEL=alloy
VOICE_QUALITY=premium
VOICE_PITCH=0Hz
VOICE_RATE=1.0
VOICE_VOLUME=100
LANGUAGE=es-AR
VOICE_OUTPUT_FORMAT=audio-24khz-96kbitrate-mono-mp3
VOICE_STREAM_LATENCY_MODE=low

# ================================
# AUDIO PROCESSING
# ================================
AUDIO_SAMPLE_RATE=24000
AUDIO_BLOCK_SIZE=240
INPUT_AUDIO_FORMAT=pcm16
OUTPUT_AUDIO_FORMAT=pcm16
AUDIO_TIMESTAMPS=word
ANIMATION_OUTPUTS=viseme_id

# Voice Activity Detection (VAD)
VAD_THRESHOLD=0.5
VAD_SILENCE_DURATION_MS=500
VAD_PREFIX_PADDING_MS=300

# Audio Quality
NOISE_SUPPRESSION=azure_deep_noise_suppression
ECHO_CANCELLATION=server_echo_cancellation

# ================================
# WEBRTC CONFIGURATION
# ================================
WEBRTC_MAX_BITRATE=3000000
WEBRTC_MIN_BITRATE=500000
WEBRTC_ENABLE_ECHO_CANCELLATION=true
WEBRTC_ENABLE_NOISE_SUPPRESSION=true
WEBRTC_ENABLE_AUTO_GAIN_CONTROL=true
WEBRTC_AUDIO_SAMPLE_RATE=48000
WEBRTC_AUDIO_CHANNELS=1
WEBRTC_ICE_TRANSPORT_POLICY=all
WEBRTC_BUNDLE_POLICY=max-bundle
WEBRTC_RTCP_MUX_POLICY=require
WEBRTC_ICE_CANDIDATE_POOL_SIZE=0
WEBRTC_PREFERRED_VIDEO_CODEC=H264
WEBRTC_PREFERRED_AUDIO_CODEC=opus
WEBRTC_ICE_RESTART_ON_DISCONNECT=true
WEBRTC_RECONNECT_BACKOFF_MS=500
WEBRTC_RECONNECT_MAX_RETRIES=5

# ICE/TURN Server (Uncomment if available)
# ICE_SERVER_URL=turn:{turn-host}:3478
# ICE_SERVER_USERNAME=
# ICE_SERVER_PASSWORD=

# Public STUN Servers
USE_PUBLIC_STUN=true
PUBLIC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302,stun:stun2.l.google.com:19302,stun:stun3.l.google.com:19302,stun:stun4.l.google.com:19302

# ================================
# SERVER CONFIGURATION
# ================================
FLASK_HOST=0.0.0.0
FLASK_PORT=5000
PORT=5000
NODE_ENV=production
SESSION_SECRET=
CORS_ORIGINS=http://localhost:5000,http://localhost:3000

# Backend Integration
FASTAPI_URL=http://localhost:8000/ask
REQUEST_TIMEOUT=120
# Backoff/Retry when calling backend
FASTAPI_RETRIES=3
FASTAPI_RETRY_BACKOFF=0.5

# SocketIO Settings
SOCKETIO_PING_TIMEOUT=60
SOCKETIO_PING_INTERVAL=25
SOCKETIO_MAX_BUFFER_SIZE=1000000
# Force async mode (eventlet|gevent|threading). Use 'threading' for thread-safe emissions
SOCKETIO_ASYNC_MODE=threading

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ================================
# PERFORMANCE & MONITORING
# ================================
ENABLE_METRICS=true
ENABLE_DETAILED_LOGGING=false
MAX_SESSION_DURATION=3600
SESSION_CLEANUP_INTERVAL=300
# Logging levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=WARNING  # Cambiado a WARNING para reducir logs
LOGLEVEL_UTIL=WARNING
LOGLEVEL_CODE_ORCHESTRATION=WARNING
# Set DEBUG_MODE=true to see detailed logs
DEBUG_MODE=false
DEBUG=false
# Avatar WebRTC debugging: true shows detailed WebRTC logs
AVATAR_DEBUG_WEBRTC=false
# Socket.IO event debugging: true shows all Socket.IO events
SOCKETIO_DEBUG_EVENTS=false
# Socket.IO thread debugging: true shows thread information for emissions
SOCKETIO_DEBUG_THREADS=false
# Avatar initialization debugging: true shows detailed Avatar init logs
AVATAR_DEBUG_INIT=false
# Enable audio delta logging (generates high volume of logs in production)
ENABLE_AUDIO_DELTA_LOGGING=false
# Client-side logging verbosity: DEBUG, INFO, WARNING, ERROR
CLIENT_LOG_LEVEL=INFO

# ================================
# APP VERSION & TEMPLATES
# ================================
APP_VERSION=2.1.0
TEMPLATE_MAIN=voice_live_interface.html
TEMPLATE_CHAT=chat.html

# ================================
# TEXT CORRECTIONS (optional)
# ================================
TEXT_CORRECTIONS_FILE=config/text_corrections.json

# ================================
# SECURITY / COOKIES / PROXY
# ================================
# Max request body size in bytes (16MB default)
MAX_CONTENT_LENGTH=16777216
# Set true in production behind TLS
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAMESITE=Lax
PREFERRED_URL_SCHEME=https
# Honor X-Forwarded-* headers when behind reverse proxy (NGINX/ALB)
USE_PROXY_FIX=false

# ================================
# FEATURE FLAGS
# ================================
ENABLE_MINIPYWO=true
ENABLE_FUNCTION_CALLING=true
ENABLE_AVATAR_METRICS=true
ENABLE_AUTO_RECONNECT=true
ENABLE_HEALTH_CHECKS=true
SQL_SEARCH_USE_SEMANTIC=true
SQL_SEARCH_APPROACH=hybrid

# ================================
# DATABASE CONFIGURATION
# ================================
TD_USER=
TD_HOST=
LOGMECH=LDAP
TERADATA_PASS=

# ================================
# AUTHENTICATION & SECURITY
# ================================
APIM_AUTH_CREDENTIAL=
JWT_SECRET=

# ================================
# BACKUP CONFIGURATIONS (High Availability)
# ================================
BACKUP_OPENAI_API_KEY=
BACKUP_SPEECH_KEY=

# ================================
# LEGACY COMPATIBILITY (Voice Live)
# ================================
AZURE_VOICE_LIVE_ENDPOINT=https://resourcename.openai.azure.com/
AZURE_VOICE_LIVE_API_KEY=
VOICE_LIVE_MODEL=gpt-4o-realtime-preview
